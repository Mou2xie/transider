import{n as C,s as U,S as O,i as Q,e as u,a as w,t as I,b as d,c as q,d as i,l as P,f as D,g as N,r as V,h as X,j as W,k as R,m as Y,o as Z,p as ee,q as te,u as se,v as ne,w as le,x as ie,y as E}from"./chunk-74add071.js";import{s as re,l as z,e as A}from"./chunk-707f6255.js";const oe="/assets/links-fill-8333011f.svg",ae="/assets/delete-bin-line-0fdddaef.svg",ce="/assets/heart-add-line-82739861.svg";const ue="/assets/arrow-left-s-line-70e1d0a6.svg",fe="/assets/arrow-right-s-line-4b6e8d2e.svg",de="/assets/skip-left-line-99018681.svg",me="/assets/skip-right-line-1c6fe7c1.svg",F=[];function pe(s,t=C){let n;const e=new Set;function l(f){if(U(s,f)&&(s=f,n)){const m=!F.length;for(const o of e)o[1](),F.push(o,s);if(m){for(let o=0;o<F.length;o+=2)F[o][0](F[o+1]);F.length=0}}}function c(f){l(f(s))}function r(f,m=C){const o=[f,m];return e.add(o),e.size===1&&(n=t(l,c)||C),f(s),()=>{e.delete(o),e.size===0&&n&&(n(),n=null)}}return{set:l,update:c,subscribe:r}}const B=pe(0);function ge(s){let t,n,e,l,c,r,f,m=s[1]+1+"",o,k,a,h,p,g,x,L,M,_,y,S;return{c(){t=u("div"),n=u("button"),n.innerHTML=`<img src="${de}" alt="skip_left"/>`,e=w(),l=u("button"),l.innerHTML=`<img src="${ue}" alt="arrow_left"/>`,c=w(),r=u("div"),f=u("div"),o=I(m),k=w(),a=u("div"),a.textContent="/",h=w(),p=u("div"),g=I(s[0]),x=w(),L=u("button"),L.innerHTML=`<img src="${fe}" alt="arrow_right"/>`,M=w(),_=u("button"),_.innerHTML=`<img src="${me}" alt="skip_right"/>`,d(f,"class","text-[#83D9F4] ml-2"),d(a,"class","text-[#677480] mx-2"),d(p,"class","text-[#677480] mr-2"),d(r,"class","flex items-center text-[20px] font-semibold"),d(t,"class","flex items-center select-none")},m($,H){q($,t,H),i(t,n),i(t,e),i(t,l),i(t,c),i(t,r),i(r,f),i(f,o),i(r,k),i(r,a),i(r,h),i(r,p),i(p,g),i(t,x),i(t,L),i(t,M),i(t,_),y||(S=[P(n,"click",s[4]),P(l,"click",s[3]),P(L,"click",s[2]),P(_,"click",s[5])],y=!0)},p($,[H]){H&2&&m!==(m=$[1]+1+"")&&D(o,m),H&1&&D(g,$[0])},i:C,o:C,d($){$&&N(t),y=!1,V(S)}}}function he(s,t,n){let e;X(s,B,o=>n(1,e=o));let{maxPage:l}=t;const c=()=>{e<l-1&&B.update(o=>o+1)},r=()=>{e>0&&B.update(o=>o-1)},f=()=>{B.set(0)},m=()=>{B.set(l-1)};return s.$$set=o=>{"maxPage"in o&&n(0,l=o.maxPage)},[l,e,c,r,f,m]}class ve extends O{constructor(t){super(),Q(this,t,he,ge,U,{maxPage:0})}}function G(s,t,n){const e=s.slice();return e[8]=t[n].value.currentURL,e[9]=t[n].value.selectedText,e[10]=t[n].value.sentence,e}function _e(s){let t;return{c(){t=u("div"),t.innerHTML=`<img src="${ce}" alt="add"/> <div class="mt-2 text-[#677480] text-[18px]">尚未标记单词</div>`,d(t,"class","mt-60 flex flex-col items-center justify-center")},m(n,e){q(n,t,e)},p:C,d(n){n&&N(t)}}}function be(s){let t,n=A(s[1][s[2]]),e=[];for(let l=0;l<n.length;l+=1)e[l]=J(G(s,n,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=le()},m(l,c){for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(l,c);q(l,t,c)},p(l,c){if(c&62){n=A(l[1][l[2]]);let r;for(r=0;r<n.length;r+=1){const f=G(l,n,r);e[r]?e[r].p(f,c):(e[r]=J(f),e[r].c(),e[r].m(t.parentNode,t))}for(;r<e.length;r+=1)e[r].d(1);e.length=n.length}},d(l){l&&N(t),ie(e,l)}}}function J(s){let t,n,e,l,c=s[9]+"",r,f,m,o=s[10]+"",k,a,h,p,g,x,L,M;return{c(){t=u("div"),n=u("span"),e=u("button"),l=u("div"),r=I(c),f=w(),m=u("div"),k=w(),a=u("div"),h=u("button"),h.innerHTML=`<img class="h-5 w-5 mr-4" src="${oe}" alt="link"/>`,p=w(),g=u("button"),g.innerHTML=`<img class="h-5 w-5" src="${ae}" alt="delete"/>`,x=w(),d(l,"class","text-[#3B4349] text-[20px] font-[600] shrink-0"),d(m,"class","ml-6 text-[#677480] mt-1 text-[14px] line-clamp-2 grow"),d(e,"class","flex text-left"),d(h,"class","invisible group-hover:visible"),d(g,"class","invisible group-hover:visible"),d(a,"class","flex justify-center items-center shrink-0 ml-2"),d(n,"class","w-full px-2 flex justify-between items-center h-[8vh] rounded-md group-hover:bg-[#EBF8FF]"),d(t,"class","flex group")},m(_,y){q(_,t,y),i(t,n),i(n,e),i(e,l),i(l,r),i(e,f),i(e,m),m.innerHTML=o,i(n,k),i(n,a),i(a,h),i(a,p),i(a,g),i(t,x),L||(M=[P(e,"click",function(){E(s[5](s[9]))&&s[5](s[9]).apply(this,arguments)}),P(h,"click",function(){E(s[3](s[8]))&&s[3](s[8]).apply(this,arguments)}),P(g,"click",function(){E(s[4](s[9]))&&s[4](s[9]).apply(this,arguments)})],L=!0)},p(_,y){s=_,y&6&&c!==(c=s[9]+"")&&D(r,c),y&6&&o!==(o=s[10]+"")&&(m.innerHTML=o)},d(_){_&&N(t),L=!1,V(M)}}}function K(s){let t,n;return t=new ve({props:{maxPage:s[1].length}}),{c(){ee(t.$$.fragment)},m(e,l){te(t,e,l),n=!0},p(e,l){const c={};l&2&&(c.maxPage=e[1].length),t.$set(c)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){R(t.$$.fragment,e),n=!1},d(e){se(t,e)}}}function ke(s){let t,n,e,l,c,r=s[0].length+"",f,m,o,k,a,h,p,g,x,L,M,_,y,S;function $(b,j){return b[1].length>0?be:_e}let H=$(s),T=H(s),v=s[1].length>0&&K(s);return{c(){t=u("main"),n=u("div"),e=u("div"),l=I("已标记"),c=u("span"),f=I(r),m=I("个单词"),o=w(),k=u("div"),a=u("button"),a.innerHTML='<div class="px-3 py-1 bg-[#83D9F4] text-white font-medium mr-5 flex justify-center items-center rounded-md">Buy me a coffee ☕️</div>',h=w(),p=u("a"),p.innerHTML=`<img src="${re}" alt="settings" class="w-6 h-6"/>`,g=w(),x=u("div"),T.c(),L=w(),M=u("div"),v&&v.c(),d(c,"class","text-[#83D9F4] mx-1"),d(e,"class","text-[#677480] text-[20px]"),d(a,"class","self-stretch flex items-stretch"),d(p,"href","/options.html"),d(p,"target","_blank"),d(k,"class","flex items-center"),d(n,"class","flex justify-between items-center"),d(x,"class","flex flex-col items-stretch divide-y divide-dashed divide-[#C5F1FF] mt-1"),d(M,"class","fixed left-0 right-0 bottom-10 flex justify-center"),d(t,"class","flex flex-col px-8 pt-5")},m(b,j){q(b,t,j),i(t,n),i(n,e),i(e,l),i(e,c),i(c,f),i(e,m),i(n,o),i(n,k),i(k,a),i(k,h),i(k,p),i(t,g),i(t,x),T.m(x,null),i(t,L),i(t,M),v&&v.m(M,null),_=!0,y||(S=P(a,"click",s[3]("https://www.jedxie.work/donate")),y=!0)},p(b,[j]){(!_||j&1)&&r!==(r=b[0].length+"")&&D(f,r),H===(H=$(b))&&T?T.p(b,j):(T.d(1),T=H(b),T&&(T.c(),T.m(x,null))),b[1].length>0?v?(v.p(b,j),j&2&&W(v,1)):(v=K(b),v.c(),W(v,1),v.m(M,null)):v&&(ne(),R(v,1,1,()=>{v=null}),Y())},i(b){_||(W(v),_=!0)},o(b){R(v),_=!1},d(b){b&&N(t),T.d(),v&&v.d(),y=!1,S()}}}function we(s,t,n){let e,l;X(s,B,a=>n(2,l=a));let c=[];const r=()=>{let a=[];z.iterate((h,p,g)=>{a.push({iterationNumber:g,key:p,value:h})}).then(()=>{a.sort((h,p)=>p.value.timeStamp-h.value.timeStamp),n(0,c=a)})},f=(a,h)=>{let p=[];for(let g=0;g<a.length;g+=h){let x=a.slice(g,g+h);p.push(x)}return p},m=a=>()=>{chrome.tabs.create({url:a})},o=a=>()=>{z.removeItem(a).then(()=>{r()})},k=a=>()=>{chrome.runtime.sendMessage({selectedText:a,from:2})};return Z(()=>{r()}),s.$$.update=()=>{s.$$.dirty&1&&n(1,e=f(c,10))},[c,e,l,m,o,k]}class xe extends O{constructor(t){super(),Q(this,t,we,ke,U,{})}}new xe({target:document.getElementById("app")});
